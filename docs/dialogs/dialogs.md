2025-12-12 创建运维项目表单中的档案系统下拉项，在产品名称后加版本号
2025-12-18 用户管理模块的分页功能不起作用，user表里有12条用户数据，但在系统中只显示出来10个，而且不能翻页。
2025-12-18 在用户管理中新增用户时，应当生成createTime，编辑用户时应当生成updateTime。
2025-12-18 具有“公司领导”或“销售总监”角色的用户，能够看到客户管理菜单和所有客户数据。
2025-12-18 customer表中增加ifDeal（是否成交），customerOwner（客户归属，值域为“自有客户、渠道客户”），channelId（渠道ID，channel_distributor表外键）。先生成数据库迁移文件，不要做其他操作。
2025-12-18 新增客户和修改客户的表单里，添加是否成交、客户归属、渠道名称输入框（必填），放在销售负责人下面。如果客户归属的值选择“渠道客户”，则显示渠道名称输入框，否则不显示。
2025-12-18 客户归属使用下拉的方式，而不是选择
2025-12-18 客户管理的列表中需要显示是否成交和客户归属，放在客户等级前面，列表中不需要显示创建时间
2025-12-18 列表中的客户归属不需要显示渠道名称
2025-12-18 客户管理模块中的筛选功能，去掉联系人，增加销售负责人、是否成交、客户归属、渠道名称
2025-12-18 请把图片中红色框里的筛选框宽度调小
2025-12-18 重新进入系统时显示登录页面，不要保留上一次未退出系统的登录状态。
2025-12-24 运维项目管理中，列表中的档案系统也要显示版本号。另外在新建和编辑运维项目的表单中，档案系统选择相同产品名称的选项，保存后不生效。
2025-12-27 在建项目管理中，新建项目时，客户名称无法输入
2025-12-27 客户管理模块中新建或编辑客户表单中的渠道名称也做同样处理；在建项目管理中新建或编辑项目表单中的渠道名称也做同样处理
2025-12-27 channel_distributor表增加saleDirector字段，user表外键。只生成数据库迁移文件，不要做其他操作。
2025-12-27 请把我每次提的需求都记录到项目根目录的docs/dialogs/dialogs.md中，包括对话内容及对话时间。只记录我提的需求，不需要记录我反馈的报错信息、调试信息。
2025-12-27 在渠道商维护模块中新增渠道商时，需要在表单中设置销售负责人字段，以下拉的形式选择用户。这个字段对应channel_distributor表的saleDirector字段，已经存在。
2025-12-27 渠道商列表中显示销售负责人
2025-12-28 客户管理、渠道商维护、在建项目管理、运维项目管理模块，增加导入表格和导出表格功能。这两个功能可以参考下标准里程碑模块。
2025-12-28 导入表格和导出表格按钮的样式请与标准里程碑模块的一致。
2025-12-28 在建项目管理和运维项目管理中导出表格和导入表格需要包括所有字段，而不只是列表中的字段
2025-12-28 具有销售角色的用户，能看到渠道商维护模块中，销售负责人是自己的数据；具有销售总监或公司领导角色的用户，能看到渠道商维护模块中的所有数据。
2025-12-28 16:43 具有销售角色、销售总监角色、公司领导角色的用户，先要能看到渠道商维护模块，然后再过滤数据
2025-12-28 16:56 具有销售角色或销售总监角色或公司领导角色的用户登录系统后，系统维护菜单下需要能看到渠道商维护模块
2025-12-28 17:07 具有公司领导角色或销售总监角色的用户，系统维护菜单下应该只能看到渠道商维护，而不能看到其他
2025-12-28 17:54 销售角色的用户，不能看到客户管理、渠道商维护、在建项目管理、运维项目管理中的导出表格按钮；售后角色或项目经理角色的用户，不能看到在建项目管理、运维项目管理中的导出表格按钮
2025-12-28 18:54 增加databaseBackup表，字段包括id、fileName、backupDate、backupState。只生成数据库迁移文件，不要做其他操作。
2025-12-28 19:20 在系统维护下增加“系统备份”菜单，用来自动备份数据库。备份方式：数据库完整备份；备份存储路径：项目根目录的database/backup文件夹；备份策略：每天备份一次，凌晨1点自动执行，保留最近15天的备份文件。系统备份菜单的界面中要显示出近15天备份成功的数据库备份记录，包括备份文件名称、备份状态（成功、失败）、备份时间。支持把备份文件下载到本地。
2025-12-28 19:35 系统备份模块界面的表格字体样式请和其他模块一致。
2025-12-28 20:15 请把系统备份标题区域和下面的表格区域隔开，界面样式可以仿照角色管理界面
2025-12-28 20:27 系统每次自动备份数据库后，需要在databaseBackup表中添加一条记录。
2025-12-28 20:36 请在系统备份界面标题栏的右侧添加”手动备份“按钮，点击按钮可以立即对数据库进行完整备份，并生成记录。
2025-12-28 20:48 修复手动备份接口403问题，确保手动备份可用。
2025-12-28 20:58 备份存储路径应为项目根目录的database/backup，而不是backend/database/backup。
2025-12-28 21:05 系统备份菜单只有admin用户以及拥有“管理员”角色的用户能够看到，其他用户看不到。
2025-12-29 打包jar包
2025-12-29 09:30 通过bat脚本启停系统时，系统停止需关闭后台java进程
2025-12-29 14:43 start-full-stack.bat 启动后系统反应慢、数据加载慢，分析原因
2025-12-29 15:13 打包jar
2025-12-29 23:01 生产环境系统备份手动备份需支持配置mysqldump路径，避免找不到命令。
2025-12-30 09:19 打包jar包
2026-02-07 生成项目规则
2026-02-07 检查个人规则与项目规则是否冲突
2026-02-07 修改项目规则，允许自动添加注释
2026-02-07 constructing_project表中projectId为3的数据在系统中不可见原因排查
2026-02-07 销售负责人和项目负责人也看不到projectId为3的数据
2026-02-07 软件系统和项目负责人必填校验
2026-02-09 打包jar包
2026-02-09 在建项目的合同外需求页面，列表字段对应extra_requirement表；右上角增加“添加需求”按钮，点击弹出表单（字段与extra_requirement一致，开发负责人下拉选user表）；合同外需求数据保存在extra_requirement表中。
2026-02-09 合同外需求页面的添加需求按钮未显示，且无数据时不显示表头。需修复按钮显示（右上角），即使无数据也显示表头，并调整样式与维保记录一致。
2026-02-09 在建项目合同外需求表单中增加附件上传、下载、删除与预览功能；附件保存至deliverableFiles/<项目编号-项目名称>/合同外需求/<需求名称>/并在extra_requirement_deliverableFiles表记录；查看模式仅预览/下载，编辑模式支持上传/下载/删除。
2026-02-09 合同外需求列表操作列增加删除按钮，删除需求时同步删除已上传附件文件。
2026-02-10 增加customer_follow_up表，字段包括recordId（主键）、followUpPerson（回访人，user表外键）、followUpDate（回访日期）、followUpWay（回访方式，值域为电话回访、现场回访）、description（回访描述）。只生成数据库迁移文件，不要做其他操作。
2026-02-10 为运维项目生成售后（销售）回访页签的前后端，界面及功能与运维事件页签保持一致。添加回访记录保存在customer_follow_up表中。
2026-02-10 回访页签接口请求返回403，需要修复。
2026-02-10 回访描述为必填，并做保存校验。
2026-02-10 增加customer_follow_up_deliverableFiles表，字段包括fileId（主键）、filePath（文件路径）、fileSize（文件大小）、uploadUser（上传人）、afterServiceProjectId（afterservice_project表外键）、followUpRecordId（customer_follow_up表外键）。只生成数据库迁移文件，不要做其他操作。
2026-02-10 添加回访记录附件上传、浏览、下载、删除功能，保存到customer_follow_up_deliverableFiles表并按指定路径存储文件，前端样式与运维事件一致。
2026-02-10 修复回访附件上传接口返回400的问题。
2026-02-10 回访附件上传仍返回400，需要继续修复。
2026-02-10 customer_follow_up_deliverableFiles表增加createTime和updateTime字段。
2026-02-10 修复078_add_timestamps_to_customer_follow_up_deliverableFiles.sql的SQL语法错误。
2026-02-10 删除回访记录时同步删除附件文件。
2026-02-10 有附件的回访记录查看按钮显示为红色。
2026-02-10 回访记录附件删除完后立即刷新查看按钮颜色。
2026-02-10 合同外需求有附件时查看按钮变红，附件清零时立即刷新颜色。
2026-02-10 合同外需求查看按钮需要在列表加载时立即变红并保持。
2026-02-11 运维项目新增销售线索页签，前后端实现并写入 afterService_leads 表。
2026-02-11 增加afterService_leads表，字段包括leadsId（主键）、afterServiceProjectId（afterService_project表外键）、isTransform（是否转化为商机）、leadsFinder（线索挖掘人，user表外键）、leadsSource（线索来源，值域为用户主动寻求、销售回访、售后维护）、leadsDescript（线索描述）。只生成数据库迁移文件，不要做其他操作。
2026-02-11 新增销售线索表单中的是否转化改为“是否转化商机”，线索描述改为必填并在保存时校验。
2026-02-11 增加afterService_leads_deliverableFiles表，字段包括fileId、filePath、fileSize、uploadUser、afterServiceProjectId、leadsId。只生成数据库迁移文件，不要做其他操作。
2026-02-11 添加销售线索附件上传、浏览、下载、删除功能，并按指定路径保存文件；查看仅浏览/下载、编辑支持上传/下载/删除，样式与运维事件一致。
2026-02-11 有附件的销售线索查看按钮变红，附件删除完立即刷新按钮颜色。
2026-02-11 如果销售线索有附件，查看按钮需在列表加载时立即变红并保持。
2026-02-11 再次进入运维项目的销售线索页签时，查看按钮需保持附件标红状态。
2026-02-12 在建项目的项目日报页签后，增加“项目评论”页签，任何能看到该项目的人都可以在这里发表评论，并且也能看到别人的评论。
2026-02-11 把渠道商维护模块名称改为“渠道管理”，并放到客户管理模块后面。
2026-02-12 修复项目评论接口返回403的问题。
2026-02-12 去掉项目评论页签下方无用的占位区域。
2026-02-12 优化项目评论页签的UI，包括输入框样式、评论列表样式（增加头像、气泡布局等）。
2026-02-12 constructing_project_comment表的content字段长度改为2000。只生成数据库迁移文件，不要做其他操作。
2026-02-12 评论内容超过2000时提示“评论内容超长，请控制在1000汉字和字符内”，并更新评论输入框提示文案。
2026-02-12 评论输入框高度限制为当前高度的三倍。
2026-02-12 增加constructing_project_commentFiles表，字段包括fileId、filePath、fileSize、uploadUser、projectId、commentId。只生成数据库迁移文件，不要做其他操作。
2026-02-12 项目评论支持上传图片与任意文件，文件存储于deliverableFiles/<项目编号-项目名称>/项目评论/，图片缩略显示并可在线打开与下载，文件名点击下载。
2026-02-12 项目评论图片点击后直接弹出预览。
2026-02-12 评论支持删除，删除时同步删除附件文件与数据库记录。
2026-02-12 评论删除限制为仅本人可删除。
2026-02-12 项目评论支持回复，回复可上传图片或文件，并在评论右下角提供“回复”入口。
2026-02-12 评论回复支持删除，且仅本人可删除，删除时同步清理附件文件与记录。
2026-02-12 回复时上传的文件或图片数据是存在哪张表里的
2026-02-13 评论或回复仅上传附件时也允许发送
2026-02-13 我修改了ConstructingProjectCommentFileService.java第87行，检查评论附件相关的其他地方是否需要改
2026-02-13 项目评论页签改为左右布局，左30%评论区，右70%查看与回复区
2026-02-13 评论区UI优化：移除背景色，保留分隔线，增加输入框默认高度。
2026-02-13 评论区UI优化：分割线延伸至页面底部，固定评论区高度。
2026-02-15 增加constructing_project_risk表，字段包括riskId（主键）、riskType（风险类型，值域为“需求控制、需求敲定、协调配合、数据迁移、商务关系、其他”）、riskLevel（风险级别，值域为“高、中、低”）、isRelieve（是否解除）、relieveWay（解除方式）、riskDescription（风险描述）、riskEvaluate（风险评估）、creator（创建人、user表外键）、projectId（constructing_project表外键）。只生成数据库迁移文件，不要做其他操作。
2026-02-15 增加constructing_project_riskFiles表，字段包括fileId、filePath、fileSize、uploadUser、projectId（constructing_project表外键）、riskId（constructing_project_risk表外键）。只生成数据库迁移文件，不要做其他操作。
2026-02-15 在建项目新增项目风险页签，样式与合同外需求一致；支持添加/查看/编辑/删除风险，附件上传下载浏览删除与合同外需求一致，附件保存到deliverableFiles/<项目编号-项目名称>/项目风险/<风险ID>/并写入constructing_project_riskFiles表。
2026-02-15 将constructing_project_risk表的relieveWay字段长度改为2000；表单中仅在“是否解除”选择“是”时显示解除方式。
2026-02-15 解除方式输入框独占一行并改为多行文本框；风险描述必填；若是否解除为“是”，解除方式必填。
2026-02-15 多行文本框只允许改变高度，不能改变宽度。
2026-02-15 生成的代码需要补充类级注释与函数级注释，并覆盖项目风险相关前后端代码。
2026-02-15 项目风险接口返回403，需要修复（/api/constructing-project-risks）。
2026-02-15 合同外需求、项目风险列表字段内容不换行显示，鼠标移入单元格显示浮动提示，参考运维事件页签实现方式。
2026-02-15 修复项目风险列表样式未生效的问题，统一使用colgroup控制列宽，强制不换行。
2026-02-15 合同内建设内容页签也实现单元格不换行与悬浮提示效果。
2026-02-15 补充合同内建设内容中“里程碑”行的悬浮提示效果。
2026-02-15 合同外需求、项目风险列表字段不换行且不改变行宽度，单元格内缩略显示，并对齐运维事件页签实现。
2026-02-15 反馈仍未生效，要求继续按运维事件页签方式确保单元格不换行且缩略显示。
